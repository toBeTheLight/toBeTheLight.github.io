---
layout: post
title:  "阅读：《图解设计模式》3 生成实例"
categories: 阅读笔记 设计模式
tags:  设计模式 单例模式 原型模式 建造者模式 抽象工厂模式
author: toBeTheLight
---

* content
{:toc}
书中将 Singleton 单例模式、Prototype 原型模式、Builder 建造者模式、Abstract Factory 抽象工厂模式归入生成实例的相关的设计模式。
* 单例模式：只允许生成一个实例的模式。
* 原型模式：通过复制生成实例。
* 建造者模式：





## Singleton 单例模式

### 定义

确保任何情况下都绝对只有一个实例的模式叫做单例模式。

### 角色

由于如 Java 中，可以实现构造函数的私有化（禁止外部调用），所以单例模式下只有一个角色。

Singleton：有一个返回唯一实例的方法。

### JavaScript 实现

由于 JavaScript 中不能很好的实现构造函数的私有化，所以需要有其他的类进行配合才能实现，且不能完全参照书中所给 Java 实现。

单例模式的实现又可以分为饿汉式（提前创建，需要时返回）和懒汉式（需要时创建）。

* 饿汉式：
  ```js
  const instance = Symbol('instance')
  class Constructor {
    constructor () {
      // 具体实现
      this.time = Date.now()
    }
  }
  const singleton = {
    [instance]: new Constructor(), // 提前生成
    getInstance () {
      return this[instance]
    }
  }
  ```
* 懒汉式：
  ```js
  const instance = Symbol('instance')
  class Constructor {
    constructor () {
      // 具体实现
      this.time = Date.now()
    }
  }
  const singleton = {
    [instance]: null,
    getInstance () {
      if (!this[instance]) {
        this[instance] = new Constructor()
      }
      return this[instance]
    }
  }
  ```

当然还有使用构造函数返回、闭包等实现方式。

### 思考

在明确只提供给用户一个实例的情况下，如组件复用、避免多个实例可能存在配置干扰时可以使用单例模式。


## Singleton 单例模式

### 定义
### 角色
### JavaScript 实现
