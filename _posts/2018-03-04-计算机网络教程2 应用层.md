---
layout: post
title:  "阅读：计算机网络教程（2）应用层"
categories: 阅读笔记 计算机网络
tags:  计算机网络 套接字
author: toBeTheLight
---

* content
{:toc}
整个因特网、硬件以及软件的设计和开发就是为应用层提供服务。TCP/IP协议簇的第五层正是这些服务的所在位置。其他四层协议使这些服务成为可能。




# 2.1 介绍

应用层的通信是由逻辑连接提供的。两台主机之间“有”一条假象的双向逻辑信道，可以通过这条信道发送接收报文。实际上通信通过了若干设备和若干物理信道。

## 2.1.1 提供服务

* 早期开始运营的所有通信网络大多都被设计为提供一种特定服务，如电话网络。
* TCP／IP协议簇的层次结构使得因特网比其他网络更加灵活。协议簇的每一层原先又一个或多个协议组成，但是可以加入新的协议。
* 加入的新协议应当被设计成使用底层协议提供的服务，删去协议时，因为其上层可能使用了它提供的服务，应改写其上层协议。应用层位于协议簇的最高层，所以可以较为轻易的被删除或添加。
* 由于位于最高层，应用层是唯一向因特网用户提供服务的层次。
* TCP／IP协议簇的前四层所用的协议通常成为包的一部分（包含在windows/UNIX里），所以前四层所使用的协议需要标准化和归档。
* 每个标准协议是一对程序，与用户和传输层进行交互。同样，可以写两个程序做为非标准协议。

# 2.1.2 应用层模型

* 传统模式：客户-服务器
* 新模式：对等
* 混合模式

# 2.2 客户-服务器模式

应用层的通信在两个运行着的应用程序之间，称为客户进程和服务器进程。服务器进程需要一直运行等待客户，客户进程通常发送有限的请求，接收响应然后停止。

## 2.2.1 应用程序接口

* 计算机程序通常是由预定义了指令集的计算机语言编写的，这个指令集告诉计算机要做什么。
* 这样的指令集通常成为应用程序接口（Application Programming Interface）API。
* 通信API有三个很常见：套接字接口、传输层接口、STREAM。

### 套接字

* 套接字接口是提供应用层和操作系统之间通信的指令集。
* 套接字是提供应用程序创建和使用的数据结构。
* 就应用层而言，客户进程和服务器进程之间的通信是两个套接字间的通信。
* 客户认为套接字是接收请求和给出响应的实体，服务器认为套接字是发出请求并且需要获得相应的实体。（此处可以理解为服务器接口地址和主机地址）

### 套接字地址

* 客户和服务端是双向通信的，我们需要一对地址：本地地址和远程地址。
* 由于客户-服务器模式的通信是在套接字之间的，我们需要一对套接字地址。
* 我们需要用TCP/IP协议簇的标识符来定义套接字地址。
* 套接字地址应该是IP地址+端口号的组合。

### 寻找套接字地址

服务器和客户站点都需要一个本地（服务器／客户）和一个远程（客户／服务器）套接字地址来通信。

* 服务器站点
    * 本地（服务器）套接字地址由操作系统提供。操作系统知道运行着服务器进程的计算机IP，端口号则需要被分配。标准进程一般都固定端口号，非标准进程则在设计时指定。
    * 远程（客户套）套接字地址包含在发送给服务器的请求报文中。

* 客户站点
    * 本地（客户）套接字地址也由操作系统提供。操作系统知道运行着客户进程的计算机的IP地址。而端口号是每次进行通信时分配给客户进程的一个临时16位整数。
    * 使用IP地址进行通信时我们知道远程套（服务器）接字地址。使用如域名、邮件地址（应用层标识符）进行通信时，需要通过域名系统DNS（Domain Name System）解析获得IP地址，而端口号客户进程通常知道。

## 2.2.2 使用传输层的服务

由于应用层没物理通信，这一对进程需要使用传输层提供的服务来通信。对传输层协议的选择将严重影响应用进程的性能。常见传输层协议有：UDP、TCP、SCTP。

* UDP：提供了无连接的、不可靠的数据包服务。
    * 两个交换报文的终端之间没有逻辑连接。
    * 每个报文都是独立的实体，被封装在一个称为数据报的分组中。
    * 无法得知发送是否完整安全到达。
* TCP：提供了面向连接的可靠的字节流传输。
    * 两个终端首先通过交换一些连接建立分组来建立一个逻辑连接，有时称为**握手**。
    * 建立连接后，两个终端可以向彼此的方向以报文段形式发送数据块，检测字节的连续性，在字节丢失和损坏时可要求重发。
* SCTP：组合UDP和TCP。
    * 面向报文的，面向连接的可靠的服务。
    * 可以通过提供多媒体网络层连接提供多媒体流服务。

# 2.3 标准客户-服务器应用

介绍6个标准应用：HTTP和万维网、文件传输和电子邮件应用、通过TELNET和SSH协议实现远程登录、DNS。

## 2.3.1 万维网和HTTP

与web相关的最常见的客户-服务器应用程序。

### 万维网